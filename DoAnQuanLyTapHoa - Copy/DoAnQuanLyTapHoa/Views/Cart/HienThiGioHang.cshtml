@using DoAnQuanLyTapHoa.Models
@model List<MatHangMua>
@{
    ViewBag.Title = "HienThiGioHang";
    Layout = "~/Views/Shared/GiaoDienKHLayout.cshtml";
}

@* google font  *@
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rowdies:wght@300&display=swap" rel="stylesheet">

@* font awsome *@
<script src="https://kit.fontawesome.com/383abdf887.js" crossorigin="anonymous"></script>

<style>

    /* phần giỏ hàng */
    .giohang {
        font-family: 'Rowdies', cursive;
        font-weight: 400;
        height: 600px;
        background-color: #FF9A8B;
        background-image: linear-gradient(90deg, #FF9A8B 0%, #FF6A88 55%, #FF99AC 100%);
        padding: 1rem;
        color: cornsilk;
    }
    /*CSS CỦA CÁC TRANG QUẢN LÝ ĐẦU MỤC*/
    .headerOfQuanLy {
        display: flex;
        justify-content: space-around;
        align-items: center;
    }

    .headerTextOfQuanLy {
        letter-spacing: 2px;
        margin-top: 50px;
        text-align: center;
        font-weight: bold;
    }

    .createNew {
        /*font-weight: bold;*/
        display: block;
        width: 200px;
        font-size: 1.2rem;
        text-decoration: none;
        color: #ffffff;
        /*background: radial-gradient(#c31432, #240b36);*/
        background-color: #424242;
        border-radius: 10px;
        padding: 10px;
        margin: 20px auto;
    }

    /* css phần thanh toán thông tin đơn hàng nè */
    .thanhtoan {
        /*background-color: #3EECAC;
        background-image: linear-gradient(19deg, #3EECAC 0%, #EE74E1 100%);*/
    }

    .submit-thanhtoan {
        width: 600px;
        margin: 0 auto;
    }
</style>



<div class="giohang container">
    <h2 class="headerTextOfQuanLy">Màn Hình Tính Tiền</h2>
    <a class="createNew" href="@Url.Action("ProductList","SanPhams")">Thêm sản phẩm</a>


    @if (Model != null)
    {
        <table class="table">
            <thead>
                <tr>
                    <th>Tên sản phẩm</th>
                    <th>Hình sản phẩm</th>
                    <th>Giá</th>
                    <th>Số lượng</th>
                    <th>Thành tiền</th>

                </tr>
            </thead>
            <tbody>

                @foreach (var sp in Model)

                {

                    double total = sp.SoLuong * (int)sp.Gia;
                    int gia = (int)sp.Gia;
                    <tr>
                        <td>
                            @sp.Tensp
                        </td>
                        <td>
                            <img src="~/Content/images/@sp.Hinh1" height="60" width="60" />
                        </td>
                        <td>
                            @*@Html.DisplayFor(model => item._shopping_product.GiaSP)*@
                            @gia.ToString("#,##0").Replace(',', '.')&#8363
                        </td>
                        <td>
                            @using (Html.BeginForm("CapNhatMatHang", "Cart", new { MaSP = sp.Masp }))
                            {
                                @*<input type="hidden" value="@sp.Masp" name="idPro" />*@

                                <input type="number" value="@sp.SoLuong" name="SoLuong" />
                                <input type="submit" value="Cập nhật" />
                                @*@String.Format(@item._shopping_product.MaSP);*@
                            }
                        </td>
                        <td>
                            @total.ToString("#,##0").Replace(',', '.')&#8363
                        </td>
                        <td>
                            <a href=" @Url.Action("XoaMatHang","Cart", new {MaSP=sp.Masp})">
                                <i class="fa-solid fa-trash fa-beat fa-2xl" style="color: #195b6c;"></i>
                            </a>

                        </td>

                    </tr>
                    @*<tr>
                            <td class="form-group">
                                <label>Hinh thuc thanh toan</label>
                                <select class="form-control"  name="Payment">
                                    <option value="1" name="COD" selected>Thanh toan khi nhan hang</option>
                                    <option value="2" name="CK" selected>Thanh toan online</option>

                                </select>
                            </td>
                        </tr>*@

                }
                @*<tr>
                        @using (Html.BeginForm("DongYDatHang", "Cart", FormMethod.Post))
                        {

                        }

                    </tr>*@
                @*@Html.DropDownList("HTThanhToan", new List<SelectListItem>
                    {
                        new SelectListItem { Text = "Thanh toán khi nhận hàng", Value = "COD" },
                        new SelectListItem { Text = "Thanh toán online", Value = "Payment" },

                    })*@


                @* hiển thị tổng tiền *@
                <tr>
                    <td colspan="6" style="text-align:right">
                        Tổng tiền: @ViewBag.TongTien.ToString("#,##0").Replace(',', '.') &#8363
                    </td>
                </tr>
                <tr style="font-weight:bold; text-align:center;">
                    <td colspan="9">
                        @if (Session["TaiLhoan"] != null)
                        {
                            @Html.ActionLink("ĐẶT HÀNG", "DatHang", null, new
                            {
                                @class = "btn btn-primary"
                            })
                        }
                        else
                        {
                            @Html.ActionLink("ĐẶT HÀNG", "DatHang2", null, new
{
    @class = "btn btn-primary"
})
                        }


                    </td>
                </tr>
            </tbody>

        </table>
    }

    else
    {
        <h3>Giỏ hàng rỗng ! xin mời tiếp tục mua hàng</h3>
    }


</div>


